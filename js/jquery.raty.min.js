(function(e){e.fn.raty=function(k){options=e.extend({},e.fn.raty.defaults,k);if(this.attr("id")==undefined){c("Invalid selector!");return}$this=e(this);if(options.number>30){options.number=30}if(options.path.substring(options.path.length-1,options.path.length)!="/"){options.path+="/"}var o=0;if(!isNaN(options.start)&&options.start>0){o=(options.start>options.number)?options.number:options.start}var g=$this.attr("id");var m=options.path;var l=options.starOff;var j=options.starOn;var n="";for(var h=1;h<=options.number;h++){n=(h<=options.hintList.length&&options.hintList[h-1]!=null)?options.hintList[h-1]:h;starFile=(o>=h)?options.starOn:options.starOff;$this.append('<img id="'+g+"-"+h+'" src="'+options.path+starFile+'" alt="'+h+'" title="'+n+'" class="'+g+'"/>').append((h<options.number)?"&nbsp;":"")}$this.css("width",options.number*20).append('<input id="'+g+'-score" type="hidden" name="'+options.scoreName+'"/>');e("#"+g+"-score").val(o);if(!options.readOnly){e("img."+g).live("mouseenter",function(){var p=e("img."+g).length;for(var q=1;q<=p;q++){if(q<=this.alt){e("img#"+g+"-"+q).attr("src",m+j)}else{e("img#"+g+"-"+q).attr("src",m+l)}}});e("img."+g).live("click",function(){e("input#"+g+"-score").val(this.alt);if(options.onClick){options.onClick(this.alt)}});$this.live("mouseleave",function(){var p=e("img."+g).length;var r=e("input#"+g+"-score").val();for(var q=1;q<=p;q++){if(q<=r){e("img#"+g+"-"+q).attr("src",m+j)}else{e("img#"+g+"-"+q).attr("src",m+l)}}}).css("cursor","pointer")}else{$this.css("cursor","default")}return $this};e.fn.raty.defaults={hintList:["bad","poor","regular","good","gorgeous"],number:5,path:"img/",readOnly:false,scoreName:"score",start:0,starOff:"star-off.png",starOn:"star-on.png",callBack:null};e.fn.raty.readOnly=function(g){if(g){e("img."+$this.attr("id")).die();$this.css("cursor","default").die()}else{d();f();b();$this.css("cursor","pointer")}return e.fn.raty};e.fn.raty.start=function(g){a(g);return e.fn.raty};function d(){var g=$this.attr("id");e("img."+g).live("mouseenter",function(){var h=e("img."+g).length;for(var j=1;j<=h;j++){if(j<=this.alt){e("img#"+g+"-"+j).attr("src",options.path+options.starOn)}else{e("img#"+g+"-"+j).attr("src",options.path+options.starOff)}}})}function f(){var g=$this.attr("id");$this.live("mouseleave",function(){var h=e("img."+g).length;var k=e("input#"+g+"-score").val();for(var j=1;j<=h;j++){if(j<=k){e("img#"+g+"-"+j).attr("src",options.path+options.starOn)}else{e("img#"+g+"-"+j).attr("src",options.path+options.starOff)}}})}function b(){var g=$this.attr("id");e("img."+g).live("click",function(){e("input#"+g+"-score").val(this.alt)})}function a(k){var j=$this.attr("id");var g=e("img."+j).length;e("input#"+j+"-score").val(k);for(var h=1;h<=g;h++){if(h<=k){e("img#"+j+"-"+h).attr("src",options.path+options.starOn)}else{e("img#"+j+"-"+h).attr("src",options.path+options.starOff)}}}function c(g){if(window.console&&window.console.log){window.console.log(g)}}})(jQuery);